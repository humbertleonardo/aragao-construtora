Alpine.data("etapasTabProjetos",()=>({infoProjeto:null,modalInfoProjeto:!1,modalImageSrc:null,modalImage:null,carregarImagens(){this.infoProjeto.imagens.map(e=>axios.get("/home/imagens/arquivo/"+e.id).then(t=>(t.data&&t.data.url&&(e.url=t.data.url),e)).catch(t=>(console.error("Erro ao carregar a URL da imagem:",t),e))).forEach(e=>{e.then(t=>{const a=this.infoProjeto.imagens.findIndex(i=>i.id===t.id);a!==-1&&(this.infoProjeto.imagens[a]=t)})})},setInfoProjeto(o){this.infoProjeto=o,this.modalInfoProjeto=!0,this.carregarImagens()},setModalImage(o){this.modalImageSrc=o,this.modalImage=!0},abrirArquivo(o){window.open(o,"_blank")},closeModal(o){o().inputs.titulo=null,o().inputs.descricao=null,o().inputsImages=[],this.infoProjeto=null,o().editId=null,o().modal=!1},setEditModal(o,e){e().inputs.titulo=o.titulo,e().inputs.descricao=o.descricao,this.infoProjeto=o,e().editId=o.id,e().modal=!0,this.carregarImagens()},excluirProjeto(o,e){this.$store.dialog.show("Excluir projeto","Você realmente deseja excluir esse projeto?",{cancel:{},confirm:{text:"Sim, excluir!",action:()=>e().excluirProjeto(o.id)}})},exclurImagem(o,e){this.$store.dialog.show("Excluir arquivo","Você realmente deseja excluir esse arquivo?",{cancel:{},confirm:{text:"Sim, excluir!",action:()=>e().excluirImagem(o)}})}}));
