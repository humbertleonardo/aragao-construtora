Alpine.data("etapasTabAditivos",()=>({infoAditivo:null,modalInfoAditivo:!1,modalImageSrc:null,modalImage:null,carregarImagens(){this.infoAditivo.imagens.map(o=>axios.get("/home/imagens/arquivo/"+o.id).then(t=>(t.data&&t.data.url&&(o.url=t.data.url),o)).catch(t=>(console.error("Erro ao carregar a URL da imagem:",t),o))).forEach(o=>{o.then(t=>{const a=this.infoAditivo.imagens.findIndex(e=>e.id===t.id);a!==-1&&(this.infoAditivo.imagens[a]=t)})})},setInfoAditivo(i){this.infoAditivo=i,this.modalInfoAditivo=!0,this.carregarImagens()},setModalImage(i){this.modalImageSrc=i,this.modalImage=!0},abrirArquivo(i){window.open(i,"_blank")},closeModal(i){i().inputs.titulo=null,i().inputs.descricao=null,i().inputsImages=[],this.infoAditivo=null,i().editId=null,i().modal=!1},setEditModal(i,o){o().inputs.titulo=i.titulo,o().inputs.descricao=i.descricao,this.infoAditivo=i,o().editId=i.id,o().modal=!0,this.carregarImagens()},excluirAditivo(i,o){this.$store.dialog.show("Excluir aditivo","Você realmente deseja excluir esse aditivo?",{cancel:{},confirm:{text:"Sim, excluir!",action:()=>o().excluirAditivo(i.id)}})},exclurImagem(i,o){this.$store.dialog.show("Excluir arquivo","Você realmente deseja excluir esse arquivo?",{cancel:{},confirm:{text:"Sim, excluir!",action:()=>o().excluirImagem(i)}})}}));
